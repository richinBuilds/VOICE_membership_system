<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="VOICE Membership System - Supporting children who are Deaf and Hard of Hearing">

    <title>VOICE Membership System - Join Our Community</title>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/main.css}">
</head>

<body th:attrappend="data-user-logged-in=${isUserLoggedIn}">

<!-- Skip Link -->
<a href="#main-content" class="skip-link">Skip to main content</a>

<!-- ================= NAVIGATION BAR: Main navigation with user authentication state handling ================= -->

<nav class="navbar navbar-expand-lg" data-testid="main-navbar">
    <div class="container">

        <a class="navbar-brand" th:href="@{/}" data-testid="navbar-logo">
            <img th:src="@{/images/logo.png}" alt="VOICE Logo" height="40" onerror="this.style.display='none'">
        </a>

        <button class="navbar-toggler"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#navbarNav"
                aria-controls="navbarNav"
                aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">

            <ul class="navbar-nav align-items-center">

                <li class="nav-item">
                    <a class="nav-link" href="#benefits" data-testid="nav-benefits">Benefits</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="#membership" data-testid="nav-membership">Membership</a>
                </li>

                <li class="nav-item" th:if="${!isUserLoggedIn}">
                    <a class="nav-link" th:href="@{/login}" data-testid="nav-signin">Sign In</a>
                </li>

                <li class="nav-item dropdown" th:if="${isUserLoggedIn}">

                    <a class="nav-link dropdown-toggle"
                       href="#"
                       data-bs-toggle="dropdown"
                       aria-expanded="false"
                       data-testid="nav-account-dropdown">
                        <i class="fas fa-user-circle me-1"></i> My Account
                    </a>

                    <ul class="dropdown-menu dropdown-menu-end">

                        <li>
                            <a class="dropdown-item" 
                               th:href="@{${#authorization.expression('hasRole(''ADMIN'')') ? '/admin/dashboard' : '/profile'}}" 
                               data-testid="nav-dashboard">
                                <i class="fas fa-tachometer-alt me-2"></i>Dashboard
                            </a>
                        </li>

                        <li><hr class="dropdown-divider"></li>

                        <li>
                            <form th:action="@{/logout}" method="post">
                                <button class="dropdown-item" type="submit" data-testid="nav-logout">
                                    <i class="fas fa-sign-out-alt me-2"></i>Logout
                                </button>
                            </form>
                        </li>

                    </ul>

                </li>

            </ul>

        </div>

    </div>
</nav>

<!-- ================= HERO ================= -->

<section id="main-content" class="hero-section" data-testid="hero-section">

    <div class="container">

        <h1 data-testid="hero-title">Empowering Families of Children Who Are Deaf and Hard of Hearing</h1>

        <!-- Improved tagline visibility with better color -->
        <p class="tagline" data-testid="hero-tagline">
            Join our supportive community and access resources, programs, and connections that make a real difference in your family's journey.
        </p>

        <!-- Guest -->
        <div class="cta-buttons" th:if="${!isUserLoggedIn}" data-testid="hero-cta-guest">

            <a th:href="@{/register}"
               class="btn btn-light btn-lg fw-semibold"
               data-testid="hero-join-btn">
                <i class="fas fa-user-plus me-2"></i>Join Now
            </a>

            <a th:href="@{/login}"
               class="btn btn-outline-light btn-lg fw-semibold"
               data-testid="hero-signin-btn">
                <i class="fas fa-sign-in-alt me-2"></i>Sign In
            </a>

        </div>

        <!-- Logged in -->
        <div class="cta-buttons" th:if="${isUserLoggedIn}" data-testid="hero-cta-member">

            <a th:href="@{${#authorization.expression('hasRole(''ADMIN'')') ? '/admin/dashboard' : '/profile'}}"
               class="btn btn-light btn-lg fw-semibold"
               data-testid="hero-dashboard-btn">
                <i class="fas fa-tachometer-alt me-2"></i>Go to Dashboard
            </a>

        </div>

    </div>

</section>

<!-- ================= BENEFITS ================= -->

<section id="benefits" class="section-padding bg-light" data-testid="benefits-section">

    <div class="container">

        <h2 class="section-title" data-testid="benefits-title">Why Join VOICE?</h2>

        <!-- 10 Great Reasons to Be a Member -->
        <div class="reasons-content" data-testid="reasons-content">
            <h3 style="text-align: center; margin-bottom: 2rem;">10 Great Reasons to Be a Member</h3>
            
            <div style="max-width: 900px; margin: 0 auto; text-align: left;">
                <p><strong>1. Connection:</strong> You are connected to a larger group banded together to produce positive results for children experiencing hearing loss in our province.</p>

                <p><strong>2. Annual Educational Conference:</strong> The annual Conference provides quality education and networking for those who have experienced hearing loss in their lives, or the lives of others, and you receive a SIGNIFICANT discount by being a member. You can contribute to the content of the conference, participate as a volunteer, or attend to enhance your professional development.</p>

                <p><strong>3. Public Policy / Advocacy:</strong> You can contribute to the strong advocacy program centered on assuring that the voices of those who are experiencing hearing loss are being heard.</p>

                <p><strong>4. Free Financial & Informational Services:</strong> VOICE provides their members with the opportunity to access Financial Aid such as Funds dedicated to helping families provide their children with hearing technology, as well as various scholarships to assist in educational endeavours. VOICE keeps members in touch with each other and current issues through our web site and email updates of emerging issues relevant to hearing loss. You remain informed about hearing loss in our region in a way that saves you time.</p>

                <p><strong>5. Networking:</strong> You have many opportunities to network with like-minded individuals and professionals in our region, building your contacts, sharing ideas, best practices and solutions to enhance your learning, find opportunities to connect, and more. Networking events range from Annual Conferences to workshops, and activities for your children.</p>

                <p><strong>6. Affiliation:</strong> You will have affiliation with a local chapter and dozens of professionals in your region.</p>

                <p><strong>7. Discounts on Educational Offerings:</strong> You receive reduced registration fees at all VOICE events and workshops.</p>

                <p><strong>8. Leadership Opportunities:</strong> You are provided opportunities to learn and practice leadership by becoming an integral part of VOICE whether that be getting involved in your chapter, starting a new chapter, volunteering at events or hosting your own events!</p>

                <p><strong>9. Recognition:</strong> You can be recognized or can recognize your colleagues for their achievements in the hearing loss community, whether that be at VOICE or another affiliated organization.</p>

                <p><strong>10. Empowerment:</strong> You are part of a larger community. You are empowered to get involved in issues that affect your personal and professional communities and your quality of life.</p>
            </div>
        </div>

        <div class="benefits-grid">

            <div class="benefit-card"
                 th:each="benefit : ${benefits}"
                 data-testid="benefit-card">

                <div class="benefit-icon">
                    <i th:class="'fas ' + ${benefit.icon}"></i>
                </div>

                <h5 th:text="${benefit.title}">
                    Title
                </h5>

                <p th:text="${benefit.description}">
                    Description
                </p>

            </div>

        </div>

    </div>

</section>

<!-- ================= MEMBERSHIP ================= -->

<section id="membership" class="section-padding" data-testid="membership-section">

    <div class="container">

        <h2 class="section-title" data-testid="membership-title">Choose Your Membership</h2>

        <!-- MEMBERSHIP GRID -->
        <div class="membership-grid" data-testid="membership-grid">

            <!-- Free Membership Card -->
            <div class="membership-card" data-testid="membership-card-free">
                <div class="membership-header">
                    <h3>Free Membership</h3>
                    <div class="membership-price">Free</div>
                </div>
                <div class="membership-body">
                    <p class="membership-description">
                        Access to basic community resources and support
                    </p>
                    <ul class="membership-features">
                        <li>Community forum access</li>
                        <li>Monthly newsletter</li>
                        <li>Basic resource library</li>
                        <li>Event notifications</li>
                    </ul>
                </div>
            </div>

            <!-- Paid Membership Card -->
            <div class="membership-card" data-testid="membership-card-paid">
                <div class="membership-header">
                    <h3>Paid Membership</h3>
                    <div class="membership-price">From $20</div>
                </div>
                <div class="membership-body">
                    <p class="membership-description">
                        Full access to all resources, events, and exclusive support
                    </p>
                    <ul class="membership-features">
                        <li>All free membership benefits</li>
                        <li>Priority event registration</li>
                        <li>Exclusive workshops and webinars</li>
                        <li>One-on-one support sessions</li>
                        <li>Advanced resource library</li>
                        <li>Family networking opportunities</li>
                    </ul>
                </div>
            </div>

        </div>

    </div>

</section>

<!-- ================= FOOTER ================= -->

<footer class="site-footer" data-testid="site-footer">

    <div class="container text-center">

        <p class="mb-0">
            Â© 2026 VOICE for Children who are Deaf and Hard of Hearing. All Rights Reserved.
        </p>

    </div>

</footer>

<!-- ================= JOIN VOICE POPUP (Auto shows after 7s, once per session) ================= -->
<div id="voicePopup" class="voice-popup-overlay" data-testid="voice-popup-overlay" th:if="${!isUserLoggedIn}">
    <div class="voice-popup" data-testid="voice-popup">
        <button type="button" class="voice-popup-close" onclick="closeVoicePopup()" data-testid="popup-close-btn" aria-label="Close popup">
            <i class="fas fa-times"></i>
        </button>
        
        <div class="voice-popup-icon">
            <i class="fas fa-hands-helping"></i>
        </div>
        
        <h2>Join VOICE Today</h2>
        <p>Become part of our supportive community. Access resources, connect with other families, and help advocate for children who are Deaf and Hard of Hearing.</p>
        
        <div class="voice-popup-buttons">
            <a th:href="@{/register}" class="btn btn-primary-custom" data-testid="popup-create-account-btn">
                <i class="fas fa-user-plus me-2"></i>Create Account
            </a>
            <a th:href="@{/login}" class="btn btn-secondary-custom" data-testid="popup-signin-btn">
                <i class="fas fa-sign-in-alt me-2"></i>Sign In
            </a>
        </div>
    </div>
</div>

<!-- ================= JS ================= -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {

    // ===== Membership Filter Logic =====
    const buttons = document.querySelectorAll(".filter-btn");
    const cards = document.querySelectorAll(".membership-card");

    // Show all cards on load
    cards.forEach(card => {
        card.style.display = "flex";
    });

    buttons.forEach(button => {

        button.addEventListener("click", function () {

            // Active button styling
            buttons.forEach(b => b.classList.remove("active"));
            this.classList.add("active");

            const filter = this.dataset.filter;

            cards.forEach(card => {

                if (filter === "free" && card.classList.contains("free")) {
                    card.style.display = "flex";
                }

                else if (filter === "paid" && card.classList.contains("paid")) {
                    card.style.display = "flex";
                }

                else {
                    card.style.display = "none";
                }

            });

        });

    });

    // ===== Auto Popup Logic (once per session) =====
    const popup = document.getElementById('voicePopup');
    
    if (popup) {
        const popupShown = sessionStorage.getItem('voicePopupShown');
        
        if (!popupShown) {
            // Show popup after 7 seconds
            setTimeout(function() {
                popup.classList.add('show');
                sessionStorage.setItem('voicePopupShown', 'true');
            }, 7000);
        }
    }

});

// Close popup function
function closeVoicePopup() {
    const popup = document.getElementById('voicePopup');
    if (popup) {
        popup.classList.remove('show');
    }
}

// Close popup when clicking overlay (outside the popup box)
document.addEventListener('click', function(e) {
    const popup = document.getElementById('voicePopup');
    if (popup && e.target === popup) {
        closeVoicePopup();
    }
});

// Close popup on Escape key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeVoicePopup();
    }
});
</script>


</body>
</html>
